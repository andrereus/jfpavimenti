var initPhotoSwipeFromDOM=function(e){for(var t=function(e){for(var t,n,r,i,o=e.childNodes,l=o.length,a=[],d=0;l>d;d++)t=o[d],1===t.nodeType&&(n=t.children[0],r=n.getAttribute("data-size").split("x"),i={src:n.getAttribute("href"),w:parseInt(r[0],10),h:parseInt(r[1],10)},t.children.length>1&&(i.title=t.children[1].innerHTML),n.children.length>0&&(i.msrc=n.children[0].getAttribute("src")),i.el=t,a.push(i));return a},n=function p(e,t){return e&&(t(e)?e:p(e.parentNode,t))},r=function(e){e=e||window.event,e.preventDefault?e.preventDefault():e.returnValue=!1;var t=e.target||e.srcElement,r=n(t,function(e){return"FIGURE"===e.tagName});if(r){for(var i,l=r.parentNode,a=r.parentNode.childNodes,d=a.length,u=0,p=0;d>p;p++)if(1===a[p].nodeType){if(a[p]===r){i=u;break}u++}return i>=0&&o(i,l),!1}},i=function(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;for(var n=e.split("&"),r=0;r<n.length;r++)if(n[r]){var i=n[r].split("=");i.length<2||(t[i[0]]=i[1])}return t.gid&&(t.gid=parseInt(t.gid,10)),t.hasOwnProperty("pid")?(t.pid=parseInt(t.pid,10),t):t},o=function(e,n,r){var i,o,l,a=document.querySelectorAll(".pswp")[0];l=t(n),o={index:e,galleryUID:n.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=l[e].el.getElementsByTagName("img")[0],n=window.pageYOffset||document.documentElement.scrollTop,r=t.getBoundingClientRect();return{x:r.left,y:r.top+n,w:r.width}}},r&&(o.showAnimationDuration=0),i=new PhotoSwipe(a,PhotoSwipeUI_Default,l,o),i.init()},l=document.querySelectorAll(e),a=0,d=l.length;d>a;a++)l[a].setAttribute("data-pswp-uid",a+1),l[a].onclick=r;var u=i();u.pid>0&&u.gid>0&&o(u.pid-1,l[u.gid-1],!0)};initPhotoSwipeFromDOM(".gallery");